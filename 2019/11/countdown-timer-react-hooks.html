<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><!--This file has been created with processhtml.sh--><head><title>countdown-timer-react-hooks</title><link rel="stylesheet" href="countdown-timer-react-hooks.html_files/freeplane2html.css" type="text/css" /><meta name="generator" content="Freeplane-XSL Stylesheet (see: http://freeplane-xsl.dev.slash-me.net/ for details)" /><script type="text/javascript" src="countdown-timer-react-hooks.html_files/freeplane2html.js"> 
	</script><script type="text/javascript"><!--
          
               function toggle(id)
               {
                   div_el = document.getElementById(id);
                   img_el = document.getElementById('img'+id);
                   if (div_el.style.display != 'none')
                   {
          

                      div_el.style.display='none';
                      img_el.src = 'countdown-timer-react-hooks.html_files/show.png';
          
                   }
                   else
                   {
          
                      div_el.style.display='block';
                      img_el.src = 'countdown-timer-react-hooks.html_files/hide.png';
          
                   };
               };
          
          --></script></head><body><h1>countdown-timer-react-hooks</h1><div style="width:96%;  padding:2%;  margin-bottom:10px;  border: 0px;  text-align:center;  vertical-align:center;"><img src="countdown-timer-react-hooks.html_files/image.png" style="margin-bottom:10px; &#9;border: 0px; &#9;text-align:center; &#9;vertical-align:center;" alt="Imagemap" usemap="#fm_imagemap" /></div><map name="fm_imagemap" id="fm_imagemap"><area shape="rect" href="index.html" alt="countdown-timer-react-hooks" title="countdown-timer-react-hooks" coords="363,696,741,739" />
<area shape="rect" href="#FMID_1226961462FM" alt="Summary" title="Summary" coords="760,68,862,87" />
<area shape="rect" href="#FMID_1869070715FM" alt="Also, with some major holidays as well a ..." title="Also, with some major holidays as well a ..." coords="881,50,1259,102" />
<area shape="rect" href="#FMID_120250381FM" alt="Details" title="Details" coords="760,734,836,752" />
<area shape="rect" href="#FMID_1518855550FM" alt="Getting Started" title="Getting Started" coords="855,124,962,142" />
<area shape="rect" href="#FMID_8458858FM" alt="React Hooks became stable in v16.8 of Re ..." title="React Hooks became stable in v16.8 of Re ..." coords="981,105,1359,157" />
<area shape="rect" href="#FMID_962556769FM" alt="Calculating How Much Time is Left" title="Calculating How Much Time is Left" coords="855,315,1089,333" />
<area shape="rect" href="#FMID_1848900478FM" alt="This method calculates the difference be ..." title="This method calculates the difference be ..." coords="1108,160,1486,195" />
<area shape="rect" href="#FMID_1756193470FM" alt="const calculateTimeLeft = () =&gt; {
  cons ..." title="const calculateTimeLeft = () =&gt; {
  cons ..." coords="1108,198,1486,488" />
<area shape="rect" href="#FMID_1580346473FM" alt="Hooking Up the State and Effect" title="Hooking Up the State and Effect" coords="855,671,1074,689" />
<area shape="rect" href="#FMID_258451495FM" alt="The first line pulls out timeLeft which  ..." title="The first line pulls out timeLeft which  ..." coords="1093,491,1471,730" />
<area shape="rect" href="#FMID_1047162089FM" alt="const [timeLeft, setTimeLeft] = useState ..." title="const [timeLeft, setTimeLeft] = useState ..." coords="1093,733,1471,870" />
<area shape="rect" href="#FMID_1223853790FM" alt="Displaying the Time Left" title="Displaying the Time Left" coords="855,1053,1022,1071" />
<area shape="rect" href="#FMID_1880533662FM" alt="Now that we have a working hook that hol ..." title="Now that we have a working hook that hol ..." coords="1041,873,1419,1027" />
<area shape="rect" href="#FMID_1792001186FM" alt="const timerComponents = [];

Object.keys ..." title="const timerComponents = [];

Object.keys ..." coords="1041,1030,1332,1252" />
<area shape="rect" href="#FMID_1848906989FM" alt="Putting it All Together" title="Putting it All Together" coords="855,1308,1005,1326" />
<area shape="rect" href="#FMID_1466101325FM" alt="return (
  &lt;div&gt;
    {timerComponents.le ..." title="return (
  &lt;div&gt;
    {timerComponents.le ..." coords="1024,1255,1402,1358" />
<area shape="rect" href="https://codesandbox.io/s/funny-sinoussi-howyc" alt="demo" title="demo" coords="1024,1361,1090,1379" />
<area shape="rect" href="#FMID_808607355FM" alt="links" title="links" coords="290,684,344,702" />
<area shape="rect" href="https://alligator.io/react/countdown-timer-react-hooks/" alt="countdown-timer-react-hooks" title="countdown-timer-react-hooks" coords="50,674,271,692" />
<area shape="rect" href="https://codesandbox.io/s/funny-sinoussi-howyc" alt="demo" title="demo" coords="209,695,271,713" />
<area shape="rect" href="#FMID_1100215200FM" alt="docs" title="docs" coords="290,718,344,736" />
<area shape="rect" href="https://alligator.io/react/react-hooks/" alt="introduction-to-react-hooks" title="introduction-to-react-hooks" coords="65,716,271,734" />
<area shape="rect" href="#FMID_466759422FM" alt="tags" title="tags" coords="291,741,344,759" />
<area shape="rect" href="#FMID_726822941FM" alt="#react" title="#react" coords="222,739,272,757" />
</map>

<div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N65543&quot;)" id="imgN65543" /><img src="countdown-timer-react-hooks.html_files/icons/bookmark.svg" alt="bookmark" /> <a id="FMID_1831615648FM" /><div class="nodecontent" style="color:#000000;font-size:150%;"><a href="index.html">countdown-timer-react-hooks</a> <a href="index.html"><img src="countdown-timer-react-hooks.html_files/ilink.png" alt="User Link" style="border-width:0" /></a></div><div class="content" id="N65543"><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66445&quot;)" id="imgN66445" /><img src="countdown-timer-react-hooks.html_files/icons/wizard.svg" alt="wizard" /> <a id="FMID_1226961462FM" /><div class="nodecontent" style="color:#3333ff;font-size:92%;font-weight:bold;">Summary</div><div class="content" id="N66445"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1869070715FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Also, with some major holidays as well as the New Year approaching, ‘tis the season for building a countdown timer!</div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66523&quot;)" id="imgN66523" /><img src="countdown-timer-react-hooks.html_files/icons/list.svg" alt="list" /> <a id="FMID_120250381FM" /><div class="nodecontent" style="color:#000000;font-size:83%;font-weight:bold;">Details</div><div class="content" id="N66523"><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66564&quot;)" id="imgN66564" /><a id="FMID_1518855550FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Getting Started</div><div class="content" id="N66564"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_8458858FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">React Hooks became stable in v16.8 of React, so if you’ve recently started a project, you are probably in the clear.</div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66636&quot;)" id="imgN66636" /><a id="FMID_962556769FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Calculating How Much Time is Left</div><div class="content" id="N66636"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1848900478FM" /><div class="nodecontent" style="color:#000000;font-size:83%;font-weight:bold;">This method calculates the difference between the two dates</div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1756193470FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">const calculateTimeLeft = () =&gt; {<br />  const difference = +new Date("2020-01-01") - +new Date();<br />  let timeLeft = {};<br /><br />  if (difference &gt; 0) {<br />    timeLeft = {<br />      days: Math.floor(difference / (1000 * 60 * 60 * 24)),<br />      hours: Math.floor((difference / (1000 * 60 * 60)) % 24),<br />      minutes: Math.floor((difference / 1000 / 60) % 60),<br />      seconds: Math.floor((difference / 1000) % 60)<br />    };<br />  }<br /><br />  return timeLeft;<br />};</div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66744&quot;)" id="imgN66744" /><a id="FMID_1580346473FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Hooking Up the State and Effect</div><div class="content" id="N66744"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_258451495FM" /><div class="nodecontent" style="color:#000000;font-size:83%;font-weight:bold;">The first line pulls out timeLeft which will carry our time left object of intervals and provide us with a method to set the state. On component load, the timeLeft value is set to the current time left value.<br /><br />The useEffect line is what updates the amount of time remaining. Every time that timeLeft is updated in the state, the useEffect fires. Every time that fires, we set a timer for 1 second (or 1,000ms) which after that time has elapsed, will update the time left.<br /><br />The cycle will continue every second thereafter.</div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1047162089FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">const [timeLeft, setTimeLeft] = useState(calculateTimeLeft());<br /><br />useEffect(() =&gt; {<br />  setTimeout(() =&gt; {<br />    setTimeLeft(calculateTimeLeft());<br />  }, 1000);<br />});</div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66852&quot;)" id="imgN66852" /><a id="FMID_1223853790FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Displaying the Time Left</div><div class="content" id="N66852"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1880533662FM" /><div class="nodecontent" style="color:#000000;font-size:83%;font-weight:bold;">Now that we have a working hook that holds the time left as an object, and is being updated every second, now we can build out our display components.<br /><br />To do so, we’re going to loop through the properties of the timeLeft object and add an element to our components array. Only if the timer interval has a value above zero, that is:</div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1792001186FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">const timerComponents = [];<br /><br />Object.keys(timeLeft).forEach(interval =&gt; {<br />  if (!timeLeft[interval]) {<br />    return;<br />  }<br /><br />  timerComponents.push(<br />    &lt;span&gt;<br />      {timeLeft[interval]} {interval}{" "}<br />    &lt;/span&gt;<br />  );<br />});</div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N66960&quot;)" id="imgN66960" /><a id="FMID_1848906989FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">Putting it All Together</div><div class="content" id="N66960"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1466101325FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">return (<br />  &lt;div&gt;<br />    {timerComponents.length ? timerComponents : &lt;span&gt;Time's up!&lt;/span&gt;}<br />  &lt;/div&gt;<br />);</div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1381131086FM" /><div class="nodecontent" style="color:#000000;font-size:83%;font-weight:bold;"><a href="https://codesandbox.io/s/funny-sinoussi-howyc">demo</a> <a href="https://codesandbox.io/s/funny-sinoussi-howyc"><img src="countdown-timer-react-hooks.html_files/ilink.png" alt="User Link" style="border-width:0" /></a></div></div></div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N67070&quot;)" id="imgN67070" /><img src="countdown-timer-react-hooks.html_files/icons/attach.svg" alt="attach" /> <a id="FMID_808607355FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">links</div><div class="content" id="N67070"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_147800645FM" /><div class="nodecontent" style="color:#000000;font-size:83%;"><a href="https://alligator.io/react/countdown-timer-react-hooks/">countdown-timer-react-hooks</a> <a href="https://alligator.io/react/countdown-timer-react-hooks/"><img src="countdown-timer-react-hooks.html_files/ilink.png" alt="User Link" style="border-width:0" /></a></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1605438661FM" /><div class="nodecontent" style="color:#000000;font-size:83%;"><a href="https://codesandbox.io/s/funny-sinoussi-howyc">demo</a> <a href="https://codesandbox.io/s/funny-sinoussi-howyc"><img src="countdown-timer-react-hooks.html_files/ilink.png" alt="User Link" style="border-width:0" /></a></div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N67186&quot;)" id="imgN67186" /><img src="countdown-timer-react-hooks.html_files/icons/folder.svg" alt="folder" /> <a id="FMID_1100215200FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">docs</div><div class="content" id="N67186"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_1510512159FM" /><div class="nodecontent" style="color:#000000;font-size:83%;"><a href="https://alligator.io/react/react-hooks/">introduction-to-react-hooks</a> <a href="https://alligator.io/react/react-hooks/"><img src="countdown-timer-react-hooks.html_files/ilink.png" alt="User Link" style="border-width:0" /></a></div></div></div></div><div class="node"><img src="countdown-timer-react-hooks.html_files/hide.png" class="hideshow" alt="hide" onClick="toggle(&quot;N67265&quot;)" id="imgN67265" /><img src="countdown-timer-react-hooks.html_files/icons/hashtag.png" alt="hashtag" /> <a id="FMID_466759422FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">tags</div><div class="content" id="N67265"><div class="node"><img src="countdown-timer-react-hooks.html_files/leaf.png" class="hideshow" alt="leaf" /><a id="FMID_726822941FM" /><div class="nodecontent" style="color:#000000;font-size:83%;">#react</div></div></div></div></div></div>
</body></html>
